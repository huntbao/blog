---
layout: post
title: PEG.js 介绍
category: js
tag: js pegjs
---
在日常的开发工作中，一般很少需要编写自己的 DSL。但是，我们无法否认：DSL 可以提升程序员的生产力。下面是 Martin Fowler 编写的《领域特定语言》前言部分的一段话：

>我不会片面夸大 DSL 的价值。我常常说，无论你什么时候谈到 DSL 的优缺点，你都可以考虑把 “DSL” 换成 “库”。实际上，大多数 DSL 都只是在一个框架或者库上又加了薄薄的一层外壳。于是，DSL 的成本和收益往往会比人们预想的要小，但也未曾得到过充分的认识。掌握良好的技术可以大大降低构造 DSL 的成本，我希望这本书可以帮你做到这一点。这层外壳虽薄，却也实用，值得一试。

本文要介绍的 PEG.js 就是这么一个外壳。

## 入门

PEG.js 有[在线版本](http://pegjs.org/online)，推荐从它开始练手，请在新窗口打开这个链接。

打开后，请将左边的 textarea 中的内容删除，这时它的下方会有警告信息，在 textarea 中输入下面的内容：

```js
StartRule = ""
```

此时警告信息就消失了，将右边的 textarea 的内容也删除。接下来我们来编写一个 PEG.js 文法，用来计算 “我的第一个 PEG.js 文法”的字符数，其中每个中文字算 2 个字符，结果应该是 22。
